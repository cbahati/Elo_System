#!/usr/bin/python 
from __future__ import division
import math

def expected_points( rating ):
    points = 1 - (1 / ( 1 + 10 ** (rating/400)))
    return points

def elo_calc( winner, loser, result, topdog, underdog):
    rating_difference = abs(winner - loser)
    topdog_expected_pts = expected_points( rating_difference )
    underdog_expected_pts = 1 - topdog_expected_pts
    print topdog_expected_pts
    print underdog_expected_pts

    if result == 0:
        points_gained = (30 *  ( .5 - topdog_expected_pts))
        points_lost = (30 *  ( .5 - underdog_expected_pts))

    elif winner > loser:
        points_gained = (30 *  ( 1 - topdog_expected_pts))
        points_lost = (30 *  ( 0 - underdog_expected_pts))
    else:
        points_gained = (30 *  ( 1 - underdog_expected_pts))
        points_lost = (30 *  ( 0 - topdog_expected_pts))

    winner_new_rating = winner + points_gained
    loser_new_rating = loser + points_lost
    new_ratings = (winner_new_rating, loser_new_rating)
    return new_ratings
